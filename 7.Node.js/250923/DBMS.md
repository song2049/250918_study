# 데이터 베이스를 왜 배우는가?

**데이터를 신뢰할 수 있고, 재사용 할 수 있도록 중앙에서 체계적으로 관리하자**

## 일관되지 않은 과거의 데이터 관리

- A회사: 스프레드시트
- B회사: 플랫 파일

기업끼리 협업하려면? => 변환 프로그램을 만들어야 했음.

## `신뢰`할 수 있는 데이터 구조의 필요성

데이터가 여기저기 흩어져 있고, 관리하는 주체도 다 다르다면
지금 보고 있는 값이 맞는지, 또는 최신 데이터인지 확인하는 것조차 애매했다.

그래서 저는, 데이터 베이스가 왜 생겨났냐?

1. 일관성: 다 똑같은 규칙으로 저장한다.
2. 신뢰성: 한 곳에서 관리하니 출처가 명확하다.
3. 검색성: 원하는 데이터를 빠르게 찾을 수 있다.

### 1. 파일 시스템 시대 (1950 ~ 1960년대)

- 데이터를 그냥 파일에 저장
- 기업이 커지고....데이터가 늘면서....중복/불일치 문제 발생

### 2. 계층형 네트워크형 DB (1960 ~ 1970년대)

- IBM의 IMS (Information Management System) 같은 것들이 등장
- => 데이터 구조를 `트리`나 `네트워크`로 강하게 묶어서 관리

### 3. 관계형 DB (1970 ~ 1980년대)

- 1970년, IBM의 에드거 F. 코드가 관계형 모델 제안
- => 데이터를 표(테이블)로 표현하고 `SQL` 언어로 다룸
  => Oracle, IBM DB2, MS SQL Server

### 4. 인터넷 & 빅데이터 (2000년대 이후)

- 웹 서비스, SNS, 전자 상거래가 등장 => 데이터가 기하급수적으로 폭발
- 관계형 DB만으로는 복잡하고 어렵다....
- MongoDB, Redis같은 NoSQL DB등장

데이터 베이스 => DBMS

## DBMS(DataBase Management System)

쉽게 말하면: 데이터를 정의, 조작, 제어하는 프로그램이다.

이 DBMS를 큰 틀로 두 가지로 나뉘어본다면

### 1. 관계형 DBMS (RDBMS)

- 데이터를 테이블(표) 형태로 저장
- 열과 행으로 이루어져 있음
- 데이터를 다룰 때 SQL이라는 표준 언어 사용

### 2. 비관계형 DBMS (NoSQL)

- 테이블 대신에 키-값, 그래프 구조 등 다양한 방식으로 저장
- 대규모 데이터나 비정형 데이터를 다루는 데 강점을 가짐

DBMS와 대화를 하려면 SQL을 활용해야함

그 전에? 설치를 먼저 해야겠징

## install mysql for WSL2(Ubuntu)

```sh
sudo apt update
```

### MySQL 설치 명령어

```sh
sudo apt install mysql-server
```

끝났다면

```sh
mysql --version
```

MySQL 프로세스 확인하려면?

```sh
ps -ef | grep mysql
```

만약, 보이는게 아무것도 없다면, mysql을 프로세스 즉, 실행시켜야됌

```sh
sudo service mysql start
```

현재 유저 목록 확인

```sh
SELECT user, host, plugin FROM mysql.user;
SELECT * FROM mysql.user
```

root 사용자 비밀번호 변경

```sh
ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '[여러분들비밀번호]'; => 대괄호는 빼셔야 해요!
```

바꾸셨다면, ctrl + D를 입력하여 mysql 클라이언트 접속 해제 후 다시 sudo mysql로 접속해보세요.

```sh
sudo mysql -u root -p
```

그러면 다음과 같은 화면이 나옵니다

```sh
Enter password:
```

그리고 아까 설정하셨던 비번 입력해주시면 MySQL에 접속이 가능합니다. => root로

이제 데이터베이스를 만들어야 함!
데이터 베이스를 어떻게 만드느냐? 문법들이 존재하는데

## SQL (Structured Query Language)

구조화된 질의 언어
=> DBMS와 대화하기 위한 언어에요.

데이터를 정의한다!
=> 데이터 베이스를 정의한다
=> 특정 테이블 정의한다.

## DDL

데이터 정의어라고 합니다.
=> 어떤 테이블을 만들지, 어떤 구조로 만들지

- `CREATE`: 새로운 데이터베이스 혹은 테이블을 만든다.
- `SHOW`: 지금 있는 데이터베이스나 테이블 목록을 확인한다.
- `DROP`: 테이블이나 데이터베이스를 삭제한다.
- `ALTER`: 기존 구조를 수정한다.

```sh
CREATE DATABASE Boards;
SHOW DATABASES;
```

만들었다면, 특정 데이터베이스 사용하기

=> 만들어진 데이터베이스 안으로 들어가 봅니다.

```sh
USE [데이터베이스이름];
```

## 테이블 만들기

- board
- comments

### 하나의 게시글이라고 한다면? 속성을 어떻게 정의할까?

- id
- user_id
- title
- content
- hit(조회수)

```sql
CREATE TABLE board(
    id VARCHAR(50),
    user_id VARCHAR(50),
    title VARCHAR(50),
    content VARCHAR(50),
    hit VARCHAR(50)
);
```

또 하나의 테이블을 만들어야겠지

`comments`

## 필드 타입

엑셀과 비슷하죠? 지금까지는?
엑셀에서는 칸에 숫자든 문자든 아무거나 넣을 수 있다.
데이터 베이스의 테이블에서는 그 칸에 어떤 데이터가 들어올지 미리 정의해야 합니다.
=> 필드 타입

### 숫자형

- INT: 정수형 데이터를 저장합니다. (4바이트)
  나이, 점수, 글 번호 등

### 문자형

- CHAR(n)

고정 길이 문자열
항상 n칸을 차지한다.

CHAR(4) => 글자가 2개만 들어와도, 뒤에 공백 2칸이 붙어서 항상 4칸을 차지
=> 4개 공간을 차지할 수 있는 걸 뜻합니다.
현실 비유 => 네 자리 좌석이 있는 버스
사람이 2명 탔어 => 빈자리는? 2자리죠? 그래서 이 자리마저 꼭 차지하는 것처럼 보임.

`abc`
`abcd`
`abcde` ?

- VARCHAR(n)

최대 n글자까지만 저장 할 수 있다는 뜻
ab를 넣으면 ab만 저장합니다. (뒤에 공백이 없음)
abcd까지는 들어가는데 abcde까지는 오류

- TEXT

(n)옵션을 쓰지 않습니다.
자체적으로 길이 제한이 정해져 있어요. => 최대 65,535자까지

```sql
CREATE TABLE comments(
    id INT,
    board_id INT,
    content VARCHAR(50) -- 얘도 공간 지정에는 한계가 있음. 근데 이론적으로는 65,535까지는 가능함.
);
```

## 왜 길이를 지정합니까?

1970년대!

컴퓨터 초창기

데이터 베이스가 처음 만들어질 때, 컴퓨터는 지금처럼 메모리와 저장 공간이 풍족하지 않음

1MB => 대용량임!

그래서 1바이트 1바이트가 너무 너무 금처럼 귀한 자원이었다.
그래서 문자열을 저장할 때도 정확히 몇 글자를 쓸건지 미리 정해두는게 필수였어.

일관성과 신뢰성을 보장하기 위해서 길이 규칙을 정하자.

근데 숫자형인 INT는? 왜?

### 크기가 이미 정해져있다.

INT는 정수형 4바이트 크기로 고정

-2,147,483,648 ~ 2,147,483,647

그래서 크기를 따질 필요가 없다.

## 날짜형

Q. 이전에 임의로 우리가 JS에서 날짜 데이터를 넣었는데, 지금은 우리가 글을 작성하면?
DB에 글이 쌓이겠죠? 그러면 날짜가 자동으로 오늘 날짜로 계산되어서 넣어지나요?

A. 가능합니당. 근데 기본적으로 자동으로 들어가진 않아요.
엄연히 말하면! 자동으로 현재 시간을 넣는 설정을 해줘야 해요.

DATE => `YYYY-MM-DD`
TIME => HH:MM:SS
DATETIME => DATE + TIME
TIMESTAMP => 생성 수정시간 자동 기록
YEAR => 연도만 저장 (2025)

## BLOB

이미지, 동영상 같은 파일 데이터를 저장할 때 사용

## 자 그럼 다시 만들어보자.

일단 삭제

```sql
DROP TABLE comments;
show tables;
```

그리고 다시 댓글 테이블 생성

`AUTO_INCREMENT`: 새로운 데이터가 들어올 때마다 자동으로 값이 1씩 증가.
=> 주로 `primary key`와 함께 사용
`NOT NULL`: 반드시 값이 들어가야 함(null을 허용하지 않음)
`DEFAULT NOW()`: 값을 지정하지 않으면 현재 시간이 자동으로 들어감.

```sql
CREATE TABLE comments(
    id INT,
    title VARCHAR(100) NOT NULL,
    content TEXT,
    writer CHAR(20),
    hit INT DEFAULT 0,
    created_at DATETIME DEFAULT NOW()
);
```

지금 상황

테이블 board만들고, comments 만들었음.

근데? show tables;로는 테이블의 개수는 확인할 수 있는데
여전히? 그 안의 속성들 행과 열을 확인할 수 없다.

그러면 어떻게 조회하고? 데이터를 집어넣을 수 있을까?
=> 조작할 수 있을까?

## 데이터 조작어 (DML)

DML(Data Manipulation Language)
=> 데이터베이스에 저장된 데이터를 조회, 추가, 수정, 삭제하는 명령어들의 모음

- SELECT(조회)
- INSERT(추가)
- UPDATE(수정)
- DELETE(삭제)

### 테이블을 조회한다

```sql
SELECT * FROM [테이블이름];
SELECT * FROM comments;

Empty set (0.00 sec);
=> 너 지금 테이블의 값이 아무것도 없다.
```

### 테이블의 값을 집어넣는다.

```sql
-- 현재는 데이터 구조 보는용
CREATE TABLE comments(
    id INT,
    title VARCHAR(100) NOT NULL,
    content TEXT,
    writer CHAR(20),
    hit INT DEFAULT 0,
    created_at DATETIME DEFAULT NOW()
);
```

```sql
INSERT INTO [테이블명]([속성1,속성2...]) values ([속성1에넣을값,속성2에넣을값]);
=>
INSERT INTO comments(id, title, content, writer) values (3, "세 번째 글입니다.", "세 번째 내용입니다.", "wnqudgus5565");
```

위의 명령어로 SQL문 명령어로 데이터를 하나 집어넣었죠?
글을 하나 작성함.

그리고? 테이블을 조회할 수 있겠다.

```sql
SELECT * FROM comments;
```

```sh
+------+--------------------------+-----------------------------+--------------+------+---------------------+
| id   | title                    | content                     | writer       | hit  | created_at          |
+------+--------------------------+-----------------------------+--------------+------+---------------------+
|    1 | 제목입니다.              | 내용입니다.                 | wnqudgus1234 |    0 | 2025-09-23 11:58:08 |
|    2 | 두 번째 글입니다.        | 두 번째 내용입니다.         | wnqudgus1234 |    0 | 2025-09-23 12:00:27 |
+------+--------------------------+-----------------------------+--------------+------+---------------------+
```

근데? 나는 조회할 때 속성중에 title, content, writer만 볼 수 있으면 돼!

```sql
SELECT title, content, writer FROM comments;
```

```sh
+--------------------------+-----------------------------+--------------+
| title                    | content                     | writer       |
+--------------------------+-----------------------------+--------------+
| 제목입니다.              | 내용입니다.                 | wnqudgus1234 |
| 두 번째 글입니다.        | 두 번째 내용입니다.         | wnqudgus1234 |
+--------------------------+-----------------------------+--------------+
2 rows in set (0.00 sec)
```

글 하나를 더 작성.
근데? 저자를 다르게 작성함.

```sh
+------+--------------------------+-----------------------------+--------------+------+---------------------+
| id   | title                    | content                     | writer       | hit  | created_at          |
+------+--------------------------+-----------------------------+--------------+------+---------------------+
|    1 | 제목입니다.              | 내용입니다.                 | wnqudgus1234 |    0 | 2025-09-23 11:58:08 |
|    2 | 두 번째 글입니다.        | 두 번째 내용입니다.         | wnqudgus1234 |    0 | 2025-09-23 12:00:27 |
|    3 | 세 번째 글입니다.        | 세 번째 내용입니다.         | wnqudgus5565 |    0 | 2025-09-23 12:03:26 |
+------+--------------------------+-----------------------------+--------------+------+---------------------+
```

여기서? 나는 wnqudgus5565라는 애의 글만 조회하면 돼

## where 절

```sql
SELECT * FROM comments WHERE writer="wnqudgus5565"
```

```sh
+------+--------------------------+-----------------------------+--------------+------+---------------------+
| id   | title                    | content                     | writer       | hit  | created_at          |
+------+--------------------------+-----------------------------+--------------+------+---------------------+
|    3 | 세 번째 글입니다.        | 세 번째 내용입니다.         | wnqudgus5565 |    0 | 2025-09-23 12:03:26 |
+------+--------------------------+-----------------------------+--------------+------+---------------------+
```

## wnqudgus5565의 제목을 수정하고 싶다!

```sql
UPDATE comments SET title="수정이됩니꺼?" WHERE writer="wnqudgus5565";
```

그리고 조회를 해보면?

## wnqudgus5565의 데이터를 삭제하고 싶다!

```sql
DELETE FROM comments WHERE writer="wnqudgus5565";
```

다시 조회해보자

```sql
SELECT * FROM comments WHERE writer="wnqudgus5565"
=>
Empty set (0.00 sec)
```